{% extends 'base.html' %}
{% block content %}
<h1 class="mb-3">Find your trip</h1>
<form class="row g-2 mb-3">
  <div class="col-md-3">
    <label class="form-label">Type</label>
    <select name="type" class="form-select">
      <option value="">Any</option>
      <option value="FLIGHT" {% if type == 'FLIGHT' %}selected{% endif %}>Flight</option>
      <option value="TRAIN" {% if type == 'TRAIN' %}selected{% endif %}>Train</option>
      <option value="BUS" {% if type == 'BUS' %}selected{% endif %}>Bus</option>
    </select>
  </div>
  <div class="col-md-3">
    <label class="form-label">Source</label>
    <input class="form-control" name="source" value="{{ source }}" placeholder="e.g., Delhi">
  </div>
  <div class="col-md-3">
    <label class="form-label">Destination</label>
    <input class="form-control" name="destination" value="{{ destination }}" placeholder="e.g., Mumbai">
  </div>
  <div class="col-md-3">
    <label class="form-label">Date</label>
    <input type="date" class="form-control" name="date" value="{{ date }}">
  </div>
  <div class="col-12 mt-2">
    <button class="btn btn-primary">Search</button>
    <a href="{% url 'home' %}" class="btn btn-outline-secondary">Reset</a>
  </div>
</form>

<div class="list-group">
  {% for t in page_obj %}
    <a href="{% url 'travel_detail' t.pk %}" class="list-group-item list-group-item-action">
      <div class="d-flex w-100 justify-content-between">
        <h5 class="mb-1">{{ t.get_type_display }} • {{ t.source }} → {{ t.destination }}</h5>
        <small>{{ t.departure_datetime|date:"M d, Y H:i" }}</small>
      </div>
      <p class="mb-1">ID: {{ t.travel_id }} • ₹{{ t.price }} • Seats: {{ t.available_seats }}</p>
    </a>
  {% empty %}
    <div class="alert alert-info">No travel options found.</div>
  {% endfor %}
</div>

<nav class="mt-3">
  <ul class="pagination">
    {% if page_obj.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}&type={{ type }}&source={{ source }}&destination={{ destination }}&date={{ date }}">Previous</a></li>
    {% endif %}
    <li class="page-item disabled"><span class="page-link">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span></li>
    {% if page_obj.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}&type={{ type }}&source={{ source }}&destination={{ destination }}&date={{ date }}">Next</a></li>
    {% endif %}
  </ul>
</nav>
{% endblock %}
